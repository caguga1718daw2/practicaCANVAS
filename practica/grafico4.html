<!DOCTYPE html>
<html>
	<head>
    <meta charset="utf-8">
		<title>
		</title>
		<body>

			<div class="container">
							<div id="colortable" class="table-editable">
								<table class="colortable">
									<tr>
										<th id="demo" contenteditable="true">Color:</th>
										<th>Color:</th>
										<th>Color:</th>
										<th>Color:</th>
										<th>Tipografia:</th>
									</tr>
									<tr>
										<td id="c1"contenteditable="true">#FF0000</td>
										<td id="c2"contenteditable="true">#FF8000</td>
										<td id="c3"contenteditable="true">#40FF00</td>
										<td id="c4"contenteditable="true">#0040FF</td>
										<td id="T1"contenteditable="true">ARIAL</td>
									</tr>

							</div>
							<p id="exportColor"></p>



                <div class="container">
                        <div id="table" class="table-editable">
                          <table class="table">

                            <tr>
															<th></th>
                              <th id="n1"contenteditable="true" type="text">RRR</th>
                              <th id="n2"contenteditable="true" type="text">RRR</th>
                              <th id="n3"contenteditable="true" type="text">RRR</th>
                              <th id="n4"contenteditable="true" type="text">RRR</th>
                            </tr>
                            <tr>
															<td contenteditable="true">Value</td>
                              <td id="i1"contenteditable="true">0</td>
                              <td id="j1"contenteditable="true">0</td>
                              <td id="a1"contenteditable="true">0</td>
                              <td id="b1"contenteditable="true">0</td>
                            </tr>
                            <tr>
															<td contenteditable="true">Value</td>
                                <td id="i2"contenteditable="true">0</td>
                                <td id="j2"contenteditable="true">0</td>
                                <td id="a2"contenteditable="true">0</td>
                                <td id="b2"contenteditable="true">0</td>
                            </tr>
                            <tr>
															<td contenteditable="true">Value</td>
                                <td id="i3"contenteditable="true">0</td>
                                <td id="j3"contenteditable="true">0</td>
                                <td id="a3"contenteditable="true">0</td>
                                <td id="b3"contenteditable="true">0</td>
                            </tr>
                            <tr>
															<td contenteditable="true">Value</td>
                                <td id="i4"contenteditable="true">0</td>
                                <td id="j4"contenteditable="true">0</td>
                                <td id="a4"contenteditable="true">0</td>
                                <td id="b4"contenteditable="true">0</td>
                            </tr>
                        </div>
                        <button id="export-btn" class="btn btn-primary">Export Data</button>
                        <p id="export"></p>
                        <p id="ee"></p>
                        <p id="a"></p>
                        <canvas width="400" height="300" id="miLienzo">
                            Lo sentimos, tu navegador no soporta canvas
                        </canvas>
                      </div>
                      <script type="text/javascript">
                        var array = [];
                        var a=1;
                        function data(){
                        array[0]=document.getElementById("demo").innerHTML;
                        array[1]=document.getElementById("i1").innerHTML;
                        array[2]=document.getElementById("j1").innerHTML;
                        array[3]=document.getElementById("a1").innerHTML;
                        array[4]=document.getElementById("b1").innerHTML;
                        array[5]=document.getElementById("i2").innerHTML;
                        array[6]=document.getElementById("j2").innerHTML;
                        array[7]=document.getElementById("a2").innerHTML;
                        array[8]=document.getElementById("b2").innerHTML;
                        array[9]=document.getElementById("i3").innerHTML;
                        array[10]=document.getElementById("j3").innerHTML;
                        array[11]=document.getElementById("a3").innerHTML;
                        array[12]=document.getElementById("b3").innerHTML;
                        array[13]=document.getElementById("i4").innerHTML;
                        array[14]=document.getElementById("j4").innerHTML;
                        array[15]=document.getElementById("a4").innerHTML;
                        array[16]=document.getElementById("b4").innerHTML;

												//Colors per els gr√†fics
												array[17]=document.getElementById("c1").innerHTML;
												array[18]=document.getElementById("c2").innerHTML;
												array[19]=document.getElementById("c3").innerHTML;
												array[20]=document.getElementById("c4").innerHTML;

												//titol de la porcio
												array[21]=document.getElementById("n1").innerHTML;
												array[22]=document.getElementById("n2").innerHTML;
												array[23]=document.getElementById("n3").innerHTML;
												array[24]=document.getElementById("n4").innerHTML;

												//Tipus de tipografia
												array[25]=document.getElementById("T1").innerHTML;


                        document.getElementById("export").innerHTML = array;
                        a=array[1];
                        document.getElementById("ee").innerHTML = parseFloat(array[1]);
                        }
                        var myVar2=setInterval(function(){ carga() }, 1000);
        window.onload=carga;
        function carga(){
            var myVar = setInterval(function(){ data() }, 1000);
            var miLienzo = document.getElementById('miLienzo');
            var lienzo = miLienzo.getContext('2d');
            var img= new Image();
            var a=parseFloat(array[1])+parseFloat(array[5])+parseFloat(array[9])+parseFloat(array[13]);
            var b=parseFloat(array[2])+parseFloat(array[6])+parseFloat(array[10])+parseFloat(array[14]);
            var c=parseFloat(array[3])+parseFloat(array[7])+parseFloat(array[11])+parseFloat(array[15]);
            var d=parseFloat(array[4])+parseFloat(array[8])+parseFloat(array[12])+parseFloat(array[16]);
            var max= Math.max(a,b,c,d);
            var apos= 250-(a*100/max)*2;
            var bpos= 250-(b*100/max)*2;
            var cpos= 250-(c*100/max)*2;
            var dpos= 250-(d*100/max)*2;
            img.src = 'azul.jpeg';
            img.onload = function(){
                lienzo.drawImage(img,0,0,400,300);
                lienzo.strokeStyle = "black";
                lienzo.beginPath();
                lienzo.lineWidth=3;
                lienzo.moveTo(50,250);
                lienzo.lineTo(350,250);
                lienzo.moveTo(50,50);
                lienzo.lineTo(50,250);
                lienzo.stroke();
                lienzo.beginPath();
                lienzo.fillStyle="black";
                lienzo.lineWidth=0.5;
                lienzo.moveTo(50,50);
                lienzo.lineTo(350,50);
                lienzo.fillText(max,25,50);
                lienzo.moveTo(50,100);
                lienzo.lineTo(350,100);
                lienzo.fillText(3*max/4,25,100);
                lienzo.moveTo(50,150);
                lienzo.lineTo(350,150);
                lienzo.fillText(max/2,25,150);
                lienzo.moveTo(50,200);
                lienzo.lineTo(350,200);
                lienzo.fillText(max/4,25,200);
                lienzo.fillText(array[21],50+300/8,260);
                lienzo.fillText(array[22],50 + 3 * 300 / 8,260);
                lienzo.fillText(array[23],50 + 5 * 300 / 8,260);
                lienzo.fillText(array[24],50 + 7 * 300 / 8,260);
                lienzo.stroke();
                lienzo.moveTo(50,250);
                lienzo.lineTo(50,apos);
                lienzo.closePath();
                
                lienzo.beginPath();
                lienzo.moveTo(50+300/8,250);
                lienzo.lineTo(50+300/8,apos);
                // gruix de la linea
                lienzo.strokeStyle = (array[17]);
                lienzo.lineWidth=40;
                lienzo.stroke();

                //BARRA2
                lienzo.beginPath();
                lienzo.moveTo(50 + 3 * 300 / 8, 250);
                lienzo.lineTo(50 + 3 * 300 / 8, bpos);
                // gruix de la linea
                lienzo.strokeStyle = (array[18]);
                lienzo.lineWidth = 40;
                lienzo.stroke();

                //BARRA3
                lienzo.beginPath();
                lienzo.moveTo(50 + 5 * 300 / 8, 250);
                lienzo.lineTo(50 + 5 * 300 / 8, cpos);
                // gruix de la linea
                lienzo.strokeStyle = (array[19]);
                lienzo.lineWidth = 40;
                lienzo.stroke();

                //BARRA4
                lienzo.beginPath();
                lienzo.moveTo(50 + 7 * 300 / 8, 250);
                lienzo.lineTo(50 + 7 * 300 / 8, dpos);
                // gruix de la linea
                lienzo.strokeStyle = (array[20]);
                lienzo.lineWidth = 40;
                lienzo.stroke();
                
                lienzo.beginPath();
                lienzo.fillStyle = (array[17]);
				lienzo.fillText(array[21],75,20);
                lienzo.stroke();

                lienzo.fillStyle =  (array[18]);
				lienzo.fillText(array[22],150,20);
				lienzo.stroke();

				lienzo.fillStyle =  (array[19]);
				lienzo.fillText(array[23],225,20);
				lienzo.stroke();

                lienzo.fillStyle =  (array[20]);
                lienzo.fillText(array[24],300,20);
                lienzo.stroke();

            }
        }
    </script>
    <body>
        <canvas width="400" height="300" id="miLienzo">
            Lo sentimos, tu navegador no soporta canvas
        </canvas>
    </body>
</html>
